"use strict";console.log("1");var movieApi={apiKey:"0757258023265e845275de2a564555e9",baseUrl:"https://api.themoviedb.org/3/",baseImageUrl:"https://image.tmdb.org/t/p/"};console.log(movieApi);var homePageRef=document.querySelector("[data-home-gallery]"),renderFilms="",genres="",pageNumber=1;function createCardFunc(e,t,n,r){var a=document.createElement("li");a.classList.add("gallery-item-card"),a.setAttribute("data-id",n);var o=document.createElement("img");o.src=e;var c=document.createElement("p");c.classList.add("gallery-card-title"),c.textContent=t;var i=document.createElement("p");return i.classList.add("gallery-card-raiting"),i.textContent=r,a.appendChild(i),a.appendChild(o),a.appendChild(c),a.addEventListener("click",function(){console.log("Hello, I am click event!"),activeDetailsPage(n,!1)}),a}function fetchPopularMoviesList(){return fetch("".concat(movieApi.baseUrl,"movie/popular?api_key=").concat(movieApi.apiKey,"&language=en-US&page=").concat(pageNumber)).then(function(e){return e.json()}).then(function(e){var t=e.results;return console.log(t),t}).then(function(e){var a=document.createDocumentFragment();return e.forEach(function(e){var t=movieApi.baseImageUrl+"w500"+e.backdrop_path,n=e.release_date.slice(0,4),r=createCardFunc(t,"".concat(e.title," (").concat(n,")"),e.id,e.vote_average);a.appendChild(r)}),a}).then(function(e){return homePageRef.appendChild(e)})}function fetchGenres(){return fetch("".concat(movieApi.baseUrl,"genre/movie/list?api_key=").concat(movieApi.apiKey,"&language=en-US")).then(function(e){return e.json()}).then(function(e){return e.genres})}fetchPopularMoviesList(),fetchGenres();var searchForm=document.querySelector(".search__form"),errorArea=document.querySelector(".error__area"),plaginationBar=document.querySelector(".plagination"),prevBtn=document.querySelector("#previous__page"),currentPage=document.querySelector(".current__page"),nextBtn=document.querySelector("#next__page"),inputVaue="";function searchFilms(e){e.preventDefault(),inputVaue=e.target.elements.query.value,fetchFilms(pageNumber,inputVaue)}function fetchFilms(e,t){var n="";0<t.length&&""!==t.trim()&&(n=t.trim(),createCardFunc(),fetch("".concat(movieApi.baseUrl,"search/movie?api_key=").concat(movieApi.apiKey,"&language=en-US&query=").concat(n,"&page=").concat(e)).then(function(e){return e.json()}).then(function(e){var t=e.results;return 0===t.length&&notFound(),20===t.length?nextBtn.removeAttribute("disabled"):nextBtn.setAttribute("disabled",""),t}).then(function(e){clearhomePage();var n=document.createDocumentFragment();return e.forEach(function(e){var t=createCardFunc(movieApi.baseImageUrl+"w500"+e.backdrop_path,e.title,e.id);n.appendChild(t)}),n}).then(function(e){return homePageRef.appendChild(e)}))}function plaginationNavigation(e){var t=e.currentTarget.id;"previous__page"===t&&(1===(pageNumber-=1)&&prevBtn.setAttribute("disabled",""),clearhomePage(),0===inputVaue.length?fetchPopularMoviesList():fetchFilms(pageNumber,inputVaue)),"next__page"===t&&(1<(pageNumber+=1)&&prevBtn.removeAttribute("disabled"),clearhomePage(),0===inputVaue.length?fetchPopularMoviesList():fetchFilms(pageNumber,inputVaue)),currentPage.textContent=pageNumber}function focusFunction(){clearError(),searchForm.children.query.value=""}function notFound(){errorArea.insertAdjacentHTML("afterbegin","<span>По вашему запросу ничего не найдено. Попробуйте еще раз!</span>")}function clearError(){errorArea.innerHTML=""}function clearhomePage(){homePageRef.innerHTML=""}searchForm.addEventListener("submit",searchFilms),prevBtn.addEventListener("click",plaginationNavigation),nextBtn.addEventListener("click",plaginationNavigation),console.log(errorArea);var homeRef=document.querySelector(".home__link"),libraryRef=document.querySelector(".library__link"),homePageSectionRef=document.querySelector("[data-home-section]"),librarySectionRef=document.querySelector("[data-library-section]"),detailisSectionRef=document.querySelector("[data-detailis-section]"),toggleQueueBtn=document.querySelector("[data-toggle-queue]"),toggleWatchedBtn=document.querySelector("[data-toggle-watched]"),watchedBtn=document.querySelector("[data-action-watched]"),queueBtn=document.querySelector("[data-action-queue]");console.log("4");var refs={controls:document.querySelector("[data-controls]"),panes:document.querySelector("[data-panes]")};function onControlsClick(e){if(e.preventDefault(),"A"===e.target.nodeName){var t=document.querySelector(".controls__item--active");if(t)t.classList.remove("controls__item--active"),getPaneById(getPaneId(t)).classList.remove("pane--active");var n=e.target;n.classList.add("controls__item--active"),getPaneById(getPaneId(n)).classList.add("pane--active")}}function getPaneId(e){return e.getAttribute("href").slice(1)}function getPaneById(e){return refs.panes.querySelector("#".concat(e))}refs.controls.addEventListener("click",onControlsClick);