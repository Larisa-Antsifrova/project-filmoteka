"use strict";var API_KEY="0757258023265e845275de2a564555e9";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var movieApi={apiKey:API_KEY,baseUrl:"https://api.themoviedb.org/3/",searchQuery:"",perPage:20,totalPages:1,pageNumber:1,images:{baseImageUrl:"https://image.tmdb.org/t/p/",defaultBackdropImg:"",defaultPosterImg:"",currentSizes:{backdropSize:"",posterSize:""},backdropSizes:{mobile:"w780",tablet:"w780",desktop:"w780"},posterSizes:{mobile:"w342",tablet:"w500",desktop:"w780"}},incrementPage:function(){this.pageNumber+=1},decrementPage:function(){this.pageNumber-=1},resetPage:function(){this.pageNumber=1},get imageBackdropSize(){return this.images.currentSizes.backdropSize},get imagePosterSize(){return this.images.currentSizes.posterSize},calculateBackdropImgSize:function(){return 1024<=window.visualViewport.width?(this.images.currentSizes.backdropSize=this.images.backdropSizes.desktop,void(this.images.defaultBackdropImg="./images/default/backdrop-desktop.jpg")):768<=window.visualViewport.width&&window.visualViewport.width<1024?(this.images.currentSizes.backdropSize=this.images.backdropSizes.tablet,void(this.images.defaultBackdropImg="./images/default/backdrop-tablet.jpg")):window.visualViewport.width<768?(this.images.currentSizes.backdropSize=this.images.backdropSizes.mobile,void(this.images.defaultBackdropImg="./images/default/backdrop-mobile.jpg")):void 0},calculatePosterImgSize:function(){1024<=window.visualViewport.width&&(this.images.currentSizes.posterSize=this.images.posterSizes.desktop,this.images.defaultPosterImg="./images/default/poster-desktop.jpg"),768<=window.visualViewport.width&&window.visualViewport.width<1024&&(this.images.currentSizes.posterSize=this.images.posterSizes.tablet,this.images.defaultPosterImg="./images/default/poster-tablet.jpg"),window.visualViewport.width<768&&(this.images.currentSizes.posterSize=this.images.posterSizes.mobile,this.images.defaultPosterImg="./images/default/poster-mobile.jpg")},fetchPopularFilmsList:function(){var t=this;return fetch("".concat(this.baseUrl,"movie/popular?api_key=").concat(this.apiKey,"&language=en-US&page=").concat(this.pageNumber)).then(function(e){return e.json()}).then(function(e){return t.totalPages=e.total_pages,e}).then(function(e){return e.results})},fetchSearchFilmsList:function(e){var t=this;return spinner.show(),this.searchQuery=e,fetch("".concat(this.baseUrl,"search/movie?api_key=").concat(this.apiKey,"&language=en-US&query=").concat(this.searchQuery,"&page=").concat(this.pageNumber)).then(function(e){return e.json()}).then(function(e){return t.totalPages=e.total_pages,e}).then(function(e){var t=e.results;return 0===t.length&&notFound(),t}).finally(function(){spinner.hide()})},fetchTrailersAPI:function(e){return fetch("".concat(this.baseUrl,"movie/").concat(e,"/videos?api_key=").concat(this.apiKey,"&language=en-US")).then(function(e){return e.json()}).then(function(e){return e}).then(function(e){var t=e.results;return t.length?t.find(function(e){if("Trailer"==e.type)return e}):void 0})},fetchGenresList:function(){return fetch("".concat(this.baseUrl,"genre/movie/list?api_key=").concat(this.apiKey)).then(function(e){return e.json()}).then(function(e){return e.genres})}},domRefs={homePageRef:document.querySelector("[data-home-gallery]"),searchForm:document.querySelector(".search__form"),errorArea:document.querySelector(".error__area")},homePageRef=domRefs.homePageRef,searchForm=domRefs.searchForm,errorArea=domRefs.errorArea,spinner={spinnerRef:document.querySelector("[data-spinner]"),show:function(){this.spinnerRef.style.display="inline-block"},hide:function(){this.spinnerRef.style.display="none"}},PaginationApi=function(){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:5;_classCallCheck(this,i),this.paginationContainerRef=document.querySelector(".pagination-container"),this.paginationPageItemsContainerRef=document.querySelector(".pagination-page-items-container"),this.paginationToBeginningBtnRef=document.querySelector(".pagination-beginning"),this.paginationToBeginningIconRef=this.paginationToBeginningBtnRef.querySelector("i"),this.paginationPreviousPageRef=document.querySelector(".pagination-previous-page"),this.paginationPreviousPageIconRef=this.paginationPreviousPageRef.querySelector("i"),this.paginationToEndBtnRef=document.querySelector(".pagination-end"),this.paginationToEndIconRef=this.paginationToEndBtnRef.querySelector("i"),this.paginationNextPageRef=document.querySelector(".pagination-next-page"),this.paginationNextPageIconRef=this.paginationNextPageRef.querySelector("i"),this.totalPages=e,this.displayNumber=t,this.lowRange=1,this.upRange=this.totalPages>this.displayNumber?this.lowRange+this.displayNumber-1:this.totalPages,this.totalPaginationBatches=Math.ceil(this.totalPages/this.displayNumber),this.currentPaginationBatch=1,this.isLastPaginationBatch=!1,this.isFirstPaginationBatch=!0,this.currentActivePage=null,this.paginationContainerRef.addEventListener("click",this.onPaginationClick.bind(this))}return _createClass(i,[{key:"clearPaginationPageItems",value:function(){this.paginationPageItemsContainerRef.innerHTML=""}},{key:"createPaginationPageItemsMarkup",value:function(){for(var e="",t=this.lowRange;t<=this.upRange;t++)e+='<li class="waves-effect" data-page =\''.concat(t,'\'>\n              <a href="#!" class="paginator-page-item" data-page =\'').concat(t,"'>").concat(t,"</a>\n            </li>");return e}},{key:"renderPaginationPageItems",value:function(){var e=this.createPaginationPageItemsMarkup();if(this.paginationPageItemsContainerRef.insertAdjacentHTML("afterbegin",e),1===this.paginationPageItemsContainerRef.querySelectorAll("li").length)return this.disableToBeginningBtn(),this.disablePreviousPageBtn(),this.disableToEndBtn(),this.disableNextPageBtn(),void this.assignCurrentActivePage();1===movieApi.pageNumber&&(this.disableToBeginningBtn(),this.disablePreviousPageBtn(),this.enableToEndBtn(),this.enableNextPageBtn()),movieApi.pageNumber===this.totalPages&&(this.disableToEndBtn(),this.disableNextPageBtn(),this.enableToBeginningBtn(),this.enablePreviousPageBtn()),this.assignCurrentActivePage()}},{key:"disableToEndBtn",value:function(){this.paginationToEndBtnRef.classList.add("disabled"),this.paginationToEndIconRef.setAttribute("disabled",!0)}},{key:"enableToEndBtn",value:function(){this.paginationToEndBtnRef.classList.remove("disabled"),this.paginationToEndIconRef.removeAttribute("disabled")}},{key:"disableNextPageBtn",value:function(){this.paginationNextPageRef.classList.add("disabled"),this.paginationNextPageIconRef.setAttribute("disabled",!0)}},{key:"enableNextPageBtn",value:function(){this.paginationNextPageRef.classList.remove("disabled"),this.paginationNextPageIconRef.removeAttribute("disabled")}},{key:"disableToBeginningBtn",value:function(){this.paginationToBeginningBtnRef.classList.add("disabled"),this.paginationToBeginningIconRef.setAttribute("disabled",!0)}},{key:"enableToBeginningBtn",value:function(){this.paginationToBeginningBtnRef.classList.remove("disabled"),this.paginationToBeginningIconRef.removeAttribute("disabled")}},{key:"disablePreviousPageBtn",value:function(){this.paginationPreviousPageRef.classList.add("disabled"),this.paginationPreviousPageIconRef.setAttribute("disabled",!0)}},{key:"enablePreviousPageBtn",value:function(){this.paginationPreviousPageRef.classList.remove("disabled"),this.paginationPreviousPageIconRef.removeAttribute("disabled")}},{key:"assignCurrentActivePage",value:function(){var e=this.paginationPageItemsContainerRef.querySelectorAll("li"),t=_toConsumableArray(e).find(function(e){return+e.dataset.page===movieApi.pageNumber});t.classList.add("active"),this.currentActivePage=t}},{key:"switchCurrentActivePage",value:function(){var e=this.paginationPageItemsContainerRef.querySelectorAll("li"),t=_toConsumableArray(e).find(function(e){return+e.dataset.page===movieApi.pageNumber});this.currentActivePage.classList.remove("active"),t.classList.add("active"),this.currentActivePage=t}},{key:"goToBeginning",value:function(){this.currentPaginationBatch=1,this.isFirstPaginationBatch=!0,movieApi.resetPage(),this.lowRange=1,this.upRange=this.totalPages>this.displayNumber?this.lowRange+this.displayNumber-1:this.totalPages,this.clearPaginationPageItems(),this.renderPaginationPageItems(),this.disableToBeginningBtn(),this.disablePreviousPageBtn(),this.enableToEndBtn(),this.enableNextPageBtn(),this.assignCurrentActivePage()}},{key:"goToEnd",value:function(){this.currentPaginationBatch=this.totalPaginationBatches,this.isLastPaginationBatch=!0,movieApi.pageNumber=this.totalPages,this.upRange=this.totalPages,this.lowRange=this.totalPages>this.displayNumber?this.upRange-this.displayNumber+1:1,this.clearPaginationPageItems(),this.renderPaginationPageItems(),this.disableToEndBtn(),this.disableNextPageBtn(),this.enableToBeginningBtn(),this.enablePreviousPageBtn(),this.assignCurrentActivePage()}},{key:"goToNextPage",value:function(){if(this.enableToBeginningBtn(),this.enablePreviousPageBtn(),movieApi.incrementPage(),movieApi.pageNumber>this.totalPages)movieApi.pageNumber=this.totalPages;else{if(movieApi.pageNumber===this.totalPages&&(this.disableToEndBtn(),this.disableNextPageBtn()),movieApi.pageNumber>this.upRange){if(this.currentPaginationBatch+=1,this.isLastPaginationBatch=this.currentPaginationBatch===this.totalPaginationBatches,this.isLastPaginationBatch)return this.upRange=this.totalPages,this.lowRange=this.totalPages>this.displayNumber?this.upRange-this.displayNumber+1:1,this.clearPaginationPageItems(),this.renderPaginationPageItems(),void this.switchCurrentActivePage();this.lowRange=this.upRange+1,this.upRange=this.totalPages>this.displayNumber*this.currentPaginationBatch?this.lowRange+this.displayNumber-1:this.totalPages,this.clearPaginationPageItems(),this.renderPaginationPageItems()}this.switchCurrentActivePage()}}},{key:"goToPreviousPage",value:function(){if(this.enableToEndBtn(),this.enableNextPageBtn(),movieApi.decrementPage(),movieApi.pageNumber<1)movieApi.resetPage();else{if(1===movieApi.pageNumber&&(this.disableToBeginningBtn(),this.disablePreviousPageBtn()),movieApi.pageNumber<this.lowRange){if(this.currentPaginationBatch-=1,this.isFirstPaginationBatch=1===this.currentPaginationBatch,this.isFirstPaginationBatch)return this.lowRange=1,this.upRange=this.totalPages>this.displayNumber?this.lowRange+this.displayNumber-1:this.totalPages,this.clearPaginationPageItems(),this.renderPaginationPageItems(),void this.assignCurrentActivePage();this.upRange=this.lowRange-1,this.lowRange=this.upRange-this.displayNumber+1,this.clearPaginationPageItems(),this.renderPaginationPageItems()}this.switchCurrentActivePage()}}},{key:"goToSelectedPage",value:function(e){movieApi.pageNumber=+e.target.dataset.page,1===movieApi.pageNumber&&(this.disableToBeginningBtn(),this.disablePreviousPageBtn(),this.enableToEndBtn(),this.enableNextPageBtn()),movieApi.pageNumber===this.totalPages&&(this.disableToEndBtn(),this.disableNextPageBtn(),this.enableToBeginningBtn(),this.enablePreviousPageBtn()),1!==movieApi.pageNumber&&movieApi.pageNumber!==this.totalPages&&(this.enableToBeginningBtn(),this.enablePreviousPageBtn(),this.enableToEndBtn(),this.enableNextPageBtn()),this.switchCurrentActivePage()}},{key:"onPaginationClick",value:function(e){if(("A"===e.target.nodeName||"I"===e.target.nodeName)&&!e.target.hasAttribute("disabled"))return"A"===e.target.nodeName&&e.target.classList.contains("paginator-page-item")?(this.goToSelectedPage(e),void toggleRenderPage()):"first_page"===e.target.textContent?(this.goToBeginning(),void toggleRenderPage()):"chevron_left"===e.target.textContent?(this.goToPreviousPage(),void toggleRenderPage()):"last_page"===e.target.textContent?(this.goToEnd(),void toggleRenderPage()):"chevron_right"===e.target.textContent?(this.goToNextPage(),void toggleRenderPage()):void 0}},{key:"recalculate",value:function(e){this.totalPages=e,this.lowRange=1,this.upRange=this.totalPages>this.displayNumber?this.lowRange+this.displayNumber-1:this.totalPages,this.totalPaginationBatches=Math.ceil(this.totalPages/this.displayNumber),this.isLastPaginationBatch=!1,this.isFirstPaginationBatch=!0,this.clearPaginationPageItems(),this.renderPaginationPageItems()}}]),i}(),genres=movieApi.fetchGenresList(),renderFilms=movieApi.fetchPopularFilmsList();movieApi.calculateBackdropImgSize(),movieApi.calculatePosterImgSize(),spinner.hide();var paginator=new PaginationApi(movieApi.totalPages);function renderGallery(e,t){clearGallery(homePageRef),t.appendChild(e)}function createGalleryFragment(e){var i=document.createDocumentFragment();return e.forEach(function(e){var t=createMovieCard(e);i.appendChild(t)}),i}function createMovieCard(e){var t=e.backdrop_path?movieApi.images.baseImageUrl+movieApi.imageBackdropSize+e.backdrop_path:movieApi.images.defaultBackdropImg,i=e.release_date?"(".concat(e.release_date.slice(0,4),")"):"",a="".concat(e.title," ").concat(i),n=e.id,r=String(e.vote_average).padEnd(3,".0"),o=document.createElement("li");o.classList.add("gallery-item-card","hoverable","z-depth-3");var s=document.createElement("img");s.src=t;var l=document.createElement("p");if(l.classList.add("gallery-card-title"),l.textContent=a,r){var c=document.createElement("p");c.classList.add("gallery-card-raiting","valign-wrapper");var d=document.createElement("span");d.textContent=r;var u=document.createElement("i");u.classList.add("material-icons","yellow-text","text-darken-1","tiny"),u.textContent="star",c.appendChild(d),c.appendChild(u),o.appendChild(c)}return o.appendChild(s),o.appendChild(l),o.addEventListener("click",function(){activeDetailsPage(n,!1)}),o}function toggleRenderPage(){renderFilms=movieApi.searchQuery.length?(renderSearchedFilms(movieApi.searchQuery).then(function(){window.scrollTo({top:100,left:100,behavior:"smooth"})}),movieApi.fetchSearchFilmsList(movieApi.searchQuery)):(renderPopularFilms().then(function(){window.scrollTo({top:100,left:100,behavior:"smooth"})}),movieApi.fetchPopularFilmsList())}function searchFilms(e){e.preventDefault(),movieApi.searchQuery=e.target.elements.query.value.trim(),movieApi.searchQuery&&renderSearchedFilms(movieApi.searchQuery).then(function(){paginator.recalculate(movieApi.totalPages||1)}),renderFilms=movieApi.fetchSearchFilmsList(movieApi.searchQuery)}function renderSearchedFilms(e){return movieApi.fetchSearchFilmsList(e).then(createGalleryFragment).then(function(e){return renderGallery(e,homePageRef)})}function renderPopularFilms(){return movieApi.fetchPopularFilmsList().then(createGalleryFragment).then(function(e){return renderGallery(e,homePageRef)})}function onInputFocus(){clearError(),clearInput(),movieApi.resetPage()}function clearInput(){searchForm.elements.query.value="",movieApi.searchQuery=""}function notFound(){return errorArea.style.visibility="visible",setTimeout(clearError,2e3),clearInput(),movieApi.resetPage(),renderPopularFilms().then(function(){paginator.recalculate(movieApi.totalPages)})}function clearError(){errorArea.style.visibility="hidden"}renderPopularFilms().then(function(){paginator.recalculate(movieApi.totalPages)}),searchForm.addEventListener("click",onInputFocus),searchForm.addEventListener("submit",searchFilms);var trailer={trailerSection:document.querySelector(".trailer"),trailerItem:document.createElement("li"),YOUTUBE_URL:"https://www.youtube.com//embed/",trailerKey:"",renderMovieTrailer:function(e){movieApi.fetchTrailersAPI(e).then(this.createTrailerBtn.bind(this))},createTrailerRef:function(e){this.trailerItem.classList.add("trailer__ref");var t="".concat(this.YOUTUBE_URL).concat(e),i='<a href="'.concat(t,'" class=\'waves-effect waves-light btn-small pink\'><i class="material-icons left">videocam</i>Watch me!</a>');return this.trailerItem.insertAdjacentHTML("afterbegin",i),this.trailerItem},createDisabledButton:function(){this.trailerItem.classList.add("trailer__ref");return this.trailerItem.insertAdjacentHTML("afterbegin",'<a href="#" class=\'disabled btn-small \'><i class="material-icons left">videocam_off</i> No trailer</a>'),this.trailerItem},createTrailerBtn:function(e){if(e){this.trailerKey=e.key;var t=this.createTrailerRef(this.trailerKey);this.trailerSection.insertAdjacentElement("afterbegin",t),this.trailerSection.addEventListener("click",modalWindow.openModal.bind(modalWindow))}else{var i=this.createDisabledButton();this.trailerSection.insertAdjacentElement("afterbegin",i)}},clearTrailerKey:function(){this.trailerItem.innerHTML="",this.trailerSection.removeEventListener("click",modalWindow.openModal.bind(modalWindow))}},modalWindow={lightboxOverlay:document.querySelector(".lightbox__overlay"),lightboxCard:document.querySelector(".js-lightbox"),trailerVideo:document.querySelector(".trailer_referense"),openModal:function(e){e.preventDefault(),"A"===e.target.nodeName&&(this.trailerVideo.src=e.target.href,this.lightboxCard.classList.add("is-open"),this.lightboxOverlay.addEventListener("click",this.onClickOverlay.bind(this)),this.addKeydownListener())},addKeydownListener:function(){window.addEventListener("keydown",this.onPressEscape.bind(this))},removeKeydownListener:function(){window.removeEventListener("keydown",this.onPressEscape.bind(this))},onClickOverlay:function(e){e.target===e.currentTarget&&this.closeLightboxHandler()},onPressEscape:function(e){"Escape"===e.code&&this.closeLightboxHandler()},closeLightboxHandler:function(){this.removeKeydownListener(),this.lightboxCard.classList.remove("is-open"),this.trailerVideo.src="",this.lightboxOverlay.removeEventListener("click",this.onClickOverlay.bind(this))}},homeRef=document.querySelector(".home__link"),libraryRef=document.querySelector(".library__link"),homePageSectionRef=document.querySelector("[data-home-section]"),librarySectionRef=document.querySelector("[data-library-section]"),detailsSectionRef=document.querySelector("[data-details-section]"),toggleQueueBtn=document.querySelector("[data-toggle-queue]"),toggleWatchedBtn=document.querySelector("[data-toggle-watched]"),favoriteBtn=document.querySelector("[data-toggle-favorite]"),watchedBtn=document.querySelector("[data-action-watched]"),queueBtn=document.querySelector("[data-action-queue]"),favoriteMobileBtn=document.querySelector("[data-action-favorite]"),logoRefs=document.querySelector(".logo__js"),navigationRefs=document.querySelector(".navigation"),togleSwitchBtn=document.querySelector("[data-action-togle]"),homeMobileRef=document.querySelector(".home__link-mobile"),libraryMobileRef=document.querySelector(".library__link-mobile"),aboutContent=document.querySelector(".about__content"),ditailsDescription=document.querySelector("#details__about"),favoritePreTextIconRef=document.querySelector('[data-icon-favorite="addPlus"]'),favoriteSpanTextRef=document.querySelector('[data-favorite-text="textButton"]'),queuePreTextIconRef=document.querySelector('[data-icon-queue="addPlus"]'),watchedSpanTextRef=document.querySelector('[data-watched-text="textButton"]'),watchedPreTextIconRef=document.querySelector('[data-icon-watched="addPlus"]'),queueSpanTextRef=document.querySelector('[data-queue-text="textButton"]'),returnBtn=detailsSectionRef.querySelector("#return__btn"),selectFilm={};function activeHomePage(e){e.preventDefault(),movieApi.resetPage(),clearInput(),trailer.clearTrailerKey(),renderFilms=movieApi.fetchPopularFilmsList(),renderPopularFilms().then(function(){paginator.recalculate(movieApi.totalPages)}),toggleActiveLink(homeRef),homeMobileRef.classList.add("sidenav-close"),homePageSectionRef.classList.remove("is-hidden"),librarySectionRef.classList.add("is-hidden"),detailsSectionRef.classList.add("is-hidden")}function activeLibraryPage(e){e.preventDefault(),clearInput(),trailer.clearTrailerKey(),toggleActiveLink(libraryRef),libraryMobileRef.classList.add("sidenav-close"),librarySectionRef.classList.remove("is-hidden"),homePageSectionRef.classList.add("is-hidden"),detailsSectionRef.classList.add("is-hidden"),queueBtn.focus(),drawQueueFilmList(),drawWatchedFilmList(),drawFavoriteFilmList()}function activeWatchedMobile(e){e.preventDefault(),clearInput(),toggleActiveLink(libraryRef),libraryMobileRef.classList.add("sidenav-close"),librarySectionRef.classList.remove("is-hidden"),homePageSectionRef.classList.add("is-hidden"),detailsSectionRef.classList.add("is-hidden"),refs.mobileWatchedBtn.classList.add("sidenav-close"),watchedBtn.focus(),drawQueueFilmList(),drawWatchedFilmList(),drawFavoriteFilmList()}function activeQueuedMobile(e){e.preventDefault(),clearInput(),toggleActiveLink(libraryRef),libraryMobileRef.classList.add("sidenav-close"),librarySectionRef.classList.remove("is-hidden"),homePageSectionRef.classList.add("is-hidden"),detailsSectionRef.classList.add("is-hidden"),refs.mobileQueueBtn.classList.add("sidenav-close"),queueBtn.focus(),drawQueueFilmList(),drawWatchedFilmList(),drawFavoriteFilmList()}function activeFavoriteMobile(e){e.preventDefault(),clearInput(),toggleActiveLink(libraryRef),libraryMobileRef.classList.add("sidenav-close"),librarySectionRef.classList.remove("is-hidden"),homePageSectionRef.classList.add("is-hidden"),detailsSectionRef.classList.add("is-hidden"),refs.mobileFavoriteBtn.classList.add("sidenav-close"),favoriteMobileBtn.focus(),drawQueueFilmList(),drawWatchedFilmList(),drawFavoriteFilmList()}function activeDetailsPage(t,e){detailsSectionRef.classList.remove("is-hidden"),homePageSectionRef.classList.add("is-hidden"),librarySectionRef.classList.add("is-hidden");var i=JSON.parse(localStorage.getItem("filmsQueue")),a=JSON.parse(localStorage.getItem("filmsWatched")),n=JSON.parse(localStorage.getItem("filmsFavorite"));showDetails(selectFilm=e?watchedBtn.classList.contains("active")?a.find(function(e){if(e.id===t)return e}):queueBtn.classList.contains("active")?i.find(function(e){if(e.id===t)return e}):n.find(function(e){if(e.id===t)return e}):renderFilms.then(function(e){return e.find(function(e){if(e.id===t)return trailer.renderMovieTrailer(e.id),e})})),toggleQueueBtn.addEventListener("click",toggleToQueue),toggleWatchedBtn.addEventListener("click",toggleToWatched),favoriteBtn.addEventListener("click",toggleToFavorite)}function toggleActiveLink(e){var t=navigationRefs.querySelector(".active");t&&t.classList.remove("active"),e.classList.add("active")}homeRef.addEventListener("click",activeHomePage),logoRefs.addEventListener("click",activeHomePage),libraryRef.addEventListener("click",activeLibraryPage),togleSwitchBtn.addEventListener("click",switchTheme),homeMobileRef.addEventListener("click",activeHomePage),libraryMobileRef.addEventListener("click",activeLibraryPage),returnBtn.addEventListener("click",isReturnBtn);var goTopBtn=document.querySelector(".back__to__top");function trackScroll(){var e=window.pageYOffset,t=document.documentElement.clientHeight;t<e&&goTopBtn.classList.add("back__to__top-show"),e<t&&goTopBtn.classList.remove("back__to__top-show")}function backToTop(){0<window.pageYOffset&&(window.scrollBy(0,-80),setTimeout(backToTop,20))}function isReturnBtn(){trailer.clearTrailerKey(),libraryRef.classList.contains("active")?(librarySectionRef.classList.remove("is-hidden"),homePageSectionRef.classList.add("is-hidden"),detailsSectionRef.classList.add("is-hidden"),drawQueueFilmList(),drawWatchedFilmList(),drawFavoriteFilmList()):(homePageSectionRef.classList.remove("is-hidden"),librarySectionRef.classList.add("is-hidden"),detailsSectionRef.classList.add("is-hidden"))}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}function toggleToQueue(){var i=[],e=localStorage.getItem("filmsQueue");if(e&&(i=_toConsumableArray(JSON.parse(e))),selectFilm instanceof Promise)selectFilm.then(function(t){var e=i.findIndex(function(e){return e.id===t.id});-1!==e?i.splice(e,1):i.push(t),localStorage.setItem("filmsQueue",JSON.stringify(i)),monitorButtonStatusText()});else{var t=i.findIndex(function(e){return e.id===selectFilm.id});-1!==t?i.splice(t,1):i.push(selectFilm),localStorage.setItem("filmsQueue",JSON.stringify(i)),monitorButtonStatusText()}}function toggleToWatched(){var i=[],e=localStorage.getItem("filmsWatched");if(e&&(i=_toConsumableArray(JSON.parse(e))),selectFilm instanceof Promise)selectFilm.then(function(t){var e=i.findIndex(function(e){return e.id===t.id});-1!==e?i.splice(e,1):i.push(t),localStorage.setItem("filmsWatched",JSON.stringify(i)),monitorButtonStatusText()});else{var t=i.findIndex(function(e){return e.id===selectFilm.id});-1!==t?i.splice(t,1):i.push(selectFilm),localStorage.setItem("filmsWatched",JSON.stringify(i)),monitorButtonStatusText()}}function toggleToFavorite(){var i=[],e=localStorage.getItem("filmsFavorite");if(e&&(i=_toConsumableArray(JSON.parse(e))),selectFilm instanceof Promise)selectFilm.then(function(t){var e=i.findIndex(function(e){return e.id===t.id});-1!==e?i.splice(e,1):i.push(t),localStorage.setItem("filmsFavorite",JSON.stringify(i)),monitorButtonStatusText()});else{var t=i.findIndex(function(e){return e.id===selectFilm.id});-1!==t?i.splice(t,1):i.push(selectFilm),localStorage.setItem("filmsFavorite",JSON.stringify(i)),monitorButtonStatusText()}}function monitorButtonStatusText(){var e=[],t=localStorage.getItem("filmsQueue");(t&&(e=_toConsumableArray(JSON.parse(t))),selectFilm instanceof Promise)?selectFilm.then(function(t){-1!==e.findIndex(function(e){return e.id===t.id})?(queuePreTextIconRef.textContent="delete",queueSpanTextRef.textContent="from queue"):(queueSpanTextRef.textContent="to queue",queuePreTextIconRef.textContent="add")}):-1!==e.findIndex(function(e){return e.id===selectFilm.id})?(queuePreTextIconRef.textContent="delete",queueSpanTextRef.textContent="from queue"):(queueSpanTextRef.textContent="to queue",queuePreTextIconRef.textContent="add");var i=[],a=localStorage.getItem("filmsWatched");(a&&(i=_toConsumableArray(JSON.parse(a))),selectFilm instanceof Promise)?selectFilm.then(function(t){-1!==i.findIndex(function(e){return e.id===t.id})?(watchedPreTextIconRef.textContent="delete",watchedSpanTextRef.textContent="from watched"):(watchedSpanTextRef.textContent="to watched",watchedPreTextIconRef.textContent="add")}):-1!==i.findIndex(function(e){return e.id===selectFilm.id})?(watchedPreTextIconRef.textContent="delete",watchedSpanTextRef.textContent="from watched"):(watchedSpanTextRef.textContent="to watched",watchedPreTextIconRef.textContent="add");var n=[],r=localStorage.getItem("filmsFavorite");(r&&(n=_toConsumableArray(JSON.parse(r))),selectFilm instanceof Promise)?selectFilm.then(function(t){-1!==n.findIndex(function(e){return e.id===t.id})?(favoritePreTextIconRef.textContent="delete",favoriteSpanTextRef.textContent="from favorite"):(favoriteSpanTextRef.textContent="to favorite",favoritePreTextIconRef.textContent="add")}):-1!==n.findIndex(function(e){return e.id===selectFilm.id})?(favoritePreTextIconRef.textContent="delete",favoriteSpanTextRef.textContent="from favorite"):(favoriteSpanTextRef.textContent="to favorite",favoritePreTextIconRef.textContent="add")}function showDetails(e){var a=detailsSectionRef.querySelector("#details__img"),n=document.querySelector("#details__title"),r=document.querySelector("#details__vote"),o=document.querySelector("#details__popularity"),s=document.querySelector("#original__title"),l=document.querySelector("#details__about"),c=document.querySelector("#details__genre");if(e instanceof Promise)e.then(function(e){var t=e.poster_path?movieApi.images.baseImageUrl+movieApi.imagePosterSize+e.poster_path:movieApi.images.defaultPosterImg;a.setAttribute("src",t),n.textContent=e.title,r.textContent="".concat(e.vote_average," / ").concat(e.vote_count),o.textContent=e.popularity,s.textContent=e.original_title,l.textContent=e.overview;var i=e.genre_ids;genres.then(function(e){var t=e.reduce(function(e,t){return i.includes(t.id)&&e.push(t.name),e},[]);c.textContent=t.join(", ")})});else{var t=e.poster_path?movieApi.images.baseImageUrl+movieApi.imagePosterSize+e.poster_path:movieApi.images.defaultPosterImg;a.setAttribute("src",t),n.textContent=e.title,r.textContent="".concat(e.vote_average," / ").concat(e.vote_count),o.textContent=e.popularity,s.textContent=e.original_title,l.textContent=e.overview;var i=e.genre_ids;genres.then(function(e){var t=e.reduce(function(e,t){return i.includes(t.id)&&e.push(t.name),e},[]);c.textContent=t.join(", ")})}monitorButtonStatusText()}window.addEventListener("scroll",trackScroll),goTopBtn.addEventListener("click",backToTop);var bodyRef=document.querySelector("body");function switchTheme(e){"brightness_6"===e.target.textContent?(bodyRef.classList.add("dark-theme"),localStorage.setItem("Theme","DARK"),togleSwitchBtn.firstElementChild.textContent="brightness_5"):"brightness_5"===e.target.textContent&&(bodyRef.classList.remove("dark-theme"),localStorage.removeItem("Theme","DARK"),togleSwitchBtn.firstElementChild.textContent="brightness_6")}"DARK"===localStorage.getItem("Theme")&&(bodyRef.classList.add("dark-theme"),togleSwitchBtn.firstElementChild.textContent="brightness_5"),console.log("5");var refs={tabs:document.querySelector(".tabs"),tabPanes:document.querySelector(".tab-panes"),queueBtn:document.querySelector("[data-action-queue]"),watchedBtn:document.querySelector("[data-action-watched]"),favoriteBtn:document.querySelector("[data-action-favorite]"),galleryList:document.querySelector(".library-page-gallery")};function drawFilmList(e,t){var i=getTabPaneById(t),a=i.querySelector(".message"),n=i.querySelector(".library-page-gallery");clearGallery(n);var r=getFilmListFromLocalStorage(e);if(null===r||0===r.length)return a.classList.remove("message--hidden"),void a.classList.add("message--shown");a.classList.add("message--hidden"),a.classList.remove("message--shown");var o=createGalleryFragment(r);n.appendChild(o)}function drawQueueFilmList(){drawFilmList("filmsQueue","queue")}function drawWatchedFilmList(){drawFilmList("filmsWatched","watched")}function drawFavoriteFilmList(){drawFilmList("filmsFavorite","favorite")}function clearGallery(e){e.innerHTML=""}function getFilmListFromLocalStorage(e){var t=localStorage.getItem(e);return JSON.parse(t)}function onControlsClick(e){if(e.preventDefault(),"A"===e.target.nodeName){var t=document.querySelector(".tab-pane--active");if(t)t.classList.remove("tab-pane--active"),getTabPaneById(getTabPaneId(t)).classList.remove("tab-pane--active");var i=e.target;i.classList.add("tab-pane--active"),getTabPaneById(getTabPaneId(i)).classList.add("tab-pane--active")}}function getTabPaneId(e){return e.getAttribute("href").slice(1)}function getTabPaneById(e){return refs.tabPanes.querySelector("#".concat(e))}refs.tabs.addEventListener("click",onControlsClick),refs.queueBtn.addEventListener("click",drawQueueFilmList),refs.watchedBtn.addEventListener("click",drawWatchedFilmList),refs.favoriteBtn.addEventListener("click",drawFavoriteFilmList),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".sidenav");M.Sidenav.init(e,{edge:"left",draggable:!0})}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".tabs");M.Tabs.init(e,{}).select("queue")}),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".collapsible");M.Collapsible.init(e)});